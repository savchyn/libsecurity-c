LIBSECURITY_DIR ?= libsecurity/src

all: libsecurity-c

deps:
	$(MAKE) -C deps download_deps build_deps

libsecurity-c:
	mkdir -p $(LIBSECURITY_DIR)/bin
	$(MAKE) -C $(LIBSECURITY_DIR)/accounts
	$(MAKE) -C $(LIBSECURITY_DIR)/acl
	$(MAKE) -C $(LIBSECURITY_DIR)/entity
	$(MAKE) -C $(LIBSECURITY_DIR)/password
	$(MAKE) -C $(LIBSECURITY_DIR)/otp
	$(MAKE) -C $(LIBSECURITY_DIR)/salt
	$(MAKE) -C $(LIBSECURITY_DIR)/utils
	$(MAKE) -C $(LIBSECURITY_DIR)/storage

tests:
	$(MAKE) -C $(LIBSECURITY_DIR)/../testing

examples:
	$(MAKE) -C $(LIBSECURITY_DIR)/../examples

depsclean:
	$(MAKE) -C deps clean

clean:
	rm -Rf $(LIBSECURITY_DIR)/bin/
	$(MAKE) -C $(LIBSECURITY_DIR)/accounts clean
	$(MAKE) -C $(LIBSECURITY_DIR)/acl clean
	$(MAKE) -C $(LIBSECURITY_DIR)/entity clean
	$(MAKE) -C $(LIBSECURITY_DIR)/password clean
	$(MAKE) -C $(LIBSECURITY_DIR)/otp clean
	$(MAKE) -C $(LIBSECURITY_DIR)/salt clean
	$(MAKE) -C $(LIBSECURITY_DIR)/utils clean
	$(MAKE) -C $(LIBSECURITY_DIR)/storage clean
	$(MAKE) -C $(LIBSECURITY_DIR)/../testing clean
	$(MAKE) -C $(LIBSECURITY_DIR)/../examples clean
	
.PHONY: all clean depclean deps libsecurity-c
